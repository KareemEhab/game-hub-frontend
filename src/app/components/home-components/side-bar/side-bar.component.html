<div
  class="w-64 bg-gray-800 text-gray-100 fixed lg:static h-[calc(100vh-4rem)] lg:min-h-full z-10 overflow-y-auto pt-5 transform transition-all duration-300 ease-in-out"
  [class.-translate-x-full]="!sidebarService.isOpen"
  [class.lg:translate-x-0]="true"
  [class.lg:block]="true"
>
  <div class="p-4">
    <h2 class="text-2xl font-bold text-white mb-1">Purchasing</h2>

    <!-- Buy Games button -->
    <button
      class="w-full flex items-center justify-between my-3 p-2 rounded transition-colors"
      [class.text-blue-400]="selectedGenre === null"
      [class.bg-gray-700]="selectedGenre === null"
      [class.hover:text-blue-400]="selectedGenre !== null"
      [class.hover:bg-gray-700]="selectedGenre !== null"
      (click)="onBuyGamesClick(); $event.preventDefault()"
    >
      <span class="font-medium">Buy Games</span>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-5 w-5"
        viewBox="0 0 20 20"
        fill="currentColor"
      >
        <path
          fill-rule="evenodd"
          d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z"
          clip-rule="evenodd"
        />
      </svg>
    </button>

    <!-- Loading state -->
    <div *ngIf="isLoading" class="space-y-4">
      @for (num of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]; track num) {
      <div class="h-8 bg-gray-700 rounded animate-pulse"></div>
      }
    </div>

    <!-- Genres list -->
    <div *ngIf="!isLoading" class="space-y-2">
      <h2 class="text-xl font-bold mb-4">View Games</h2>
      <ul>
        <li *ngFor="let genre of genres">
          <button
            class="w-full flex items-center gap-3 p-2 rounded transition-colors text-left"
            [class.text-blue-400]="selectedGenre === genre.id"
            [class.bg-gray-700]="selectedGenre === genre.id"
            [class.hover:text-blue-400]="selectedGenre !== genre.id"
            [class.hover:bg-gray-700]="selectedGenre !== genre.id"
            (click)="onGenreClick(genre.id); $event.preventDefault()"
          >
            <img
              [src]="genre.image_background"
              alt="{{ genre.name }}"
              class="w-8 h-8 rounded object-cover"
            />
            <span>{{ genre.name }}</span>
            <span class="ml-auto text-gray-400 text-sm">{{
              genre.games_count
            }}</span>
          </button>
        </li>
      </ul>
    </div>
  </div>
</div>
